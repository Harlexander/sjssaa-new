import{r as g,j as e,G as A,A as U}from"./app-CgK7TKDC.js";import{D as E}from"./DashboardTitle-waDIhSHq.js";import{A as B}from"./AdminLayout-iNOjZrqY.js";import{C as L,a as $,b as G}from"./card-BsB6dcxO.js";import{B as h}from"./button-Cdu8HYDj.js";import{D as N,b as D,c as w,d as C,e as I,f as S,a as R}from"./dialog-1dfOzVG5.js";import{B as m}from"./react-toastify.esm-2ET1qsrO.js";import"./index.es-zCgeU7Gz.js";import"./index-DswxwWLv.js";import"./index-CyQ2yywf.js";import"./index-o45fFjyu.js";import"./createLucideIcon-4P0dJnm9.js";const Z=({images:i,category:{name:o,id:x}})=>{const[r,j]=g.useState(null),[f,a]=g.useState(!1),[d,c]=g.useState(null),b=u=>{c(u),a(!0)},p=()=>{d&&(j(d),U.delete(route("delete.image"),{data:{id:d},onSuccess:()=>{m.success("Image deleted successfully! ðŸ—‘ï¸"),a(!1),c(null)},onError:()=>{m.error("Error deleting image")},onFinish:()=>{j(null)}}))};return e.jsx(B,{children:e.jsxs("main",{className:"p-5 sm:p-10 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{title:`${o} Gallery`,subtitle:`Manage images in the ${o} category`}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[i.length," ",i.length===1?"image":"images"]}),e.jsx(y,{id:x})]})]}),i.length===0?e.jsxs("div",{className:"text-center py-16 bg-white/60 rounded-xl border-2 border-dashed border-gray-300",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“·"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Images Yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Upload your first image to this category"}),e.jsx(y,{id:x,isPrimary:!0})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:i.map(({image_path:u,caption:t,id:l},v)=>e.jsxs(L,{className:"group bg-white/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden",style:{animationDelay:`${v*100}ms`},children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:u,alt:t||"Gallery image",className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300 flex items-center justify-center",children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex gap-2",children:e.jsx(h,{size:"sm",variant:"destructive",onClick:()=>b(l),disabled:r===l,className:"bg-red-500 hover:bg-red-600 text-white",children:r===l?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ðŸ—‘ï¸"}),e.jsx("span",{className:"ml-1",children:"Delete"})]})})})})]}),t&&e.jsx($,{className:"p-3",children:e.jsx(G,{className:"text-sm text-gray-600 line-clamp-2",children:t})})]},l))}),e.jsx(N,{open:f,onOpenChange:a,children:e.jsxs(D,{className:"sm:max-w-[425px]",children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx("span",{children:"âš ï¸"}),"Confirm Delete"]}),e.jsx(I,{children:"Are you sure you want to delete this image? This action cannot be undone."})]}),e.jsxs(S,{className:"gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>a(!1),disabled:r,children:"Cancel"}),e.jsx(h,{variant:"destructive",onClick:p,disabled:r,className:"bg-red-500 hover:bg-red-600",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ðŸ—‘ï¸"}),e.jsx("span",{className:"ml-1",children:"Delete Image"})]})})]})]})})]})})};function y({id:i,isPrimary:o=!1}){const{data:x,setData:r,post:j,reset:f,processing:a}=A({image:null,id:i}),[d,c]=g.useState(null),[b,p]=g.useState(!1),[u,t]=g.useState(!1),l=s=>{s&&s.type.startsWith("image/")?(c(URL.createObjectURL(s)),r("image",s)):m.error("Please select a valid image file.")},v=s=>{const n=s.target.files[0];n&&l(n)},F=s=>{s.preventDefault(),p(!0)},k=s=>{s.preventDefault(),p(!1)},O=s=>{s.preventDefault(),p(!1);const n=s.dataTransfer.files[0];n&&l(n)},T=s=>{if(s.preventDefault(),!x.image){m.error("Please select an image.");return}j(route("new.image"),{headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{m.success("Image uploaded successfully! ðŸŽ‰"),f(),c(null),t(!1)},onError:n=>{console.error("Error:",n),m.error("An error occurred while uploading the image.")}})};return e.jsx(e.Fragment,{children:e.jsxs(N,{open:u,onOpenChange:t,children:[e.jsx(R,{asChild:!0,children:e.jsxs(h,{variant:o?"default":"outline",className:o?"bg-[#800000] hover:bg-[#700000] text-white px-6 py-3 rounded-lg flex items-center gap-2":"border-2 border-dashed border-gray-300 hover:border-[#800000] hover:bg-gray-50 px-6 py-3 rounded-lg flex items-center gap-2 transition-all duration-200",children:[e.jsx("span",{children:"ðŸ“·"}),o?"Upload First Image":"Add Image"]})}),e.jsxs(D,{className:"sm:max-w-[500px]",children:[e.jsxs(w,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“¤"}),"Upload Image"]}),e.jsx(I,{children:"Choose an image file to upload or drag and drop it below."})]}),e.jsxs("form",{onSubmit:T,className:"grid gap-6 py-4",children:[e.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-all duration-200 ${b?"border-[#800000] bg-red-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:F,onDragLeave:k,onDrop:O,children:d?e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{src:d,alt:"Selected preview",className:"w-full max-h-64 object-cover rounded-lg shadow-md"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{children:"âœ…"}),e.jsx("span",{children:"Image selected and ready to upload"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-4xl",children:"ðŸ“·"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-700",children:b?"Drop your image here":"Drag & drop an image here"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"or click to browse files"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",name:"image",onChange:v,className:"h-full w-full opacity-0 absolute cursor-pointer",accept:"image/*"}),e.jsx("button",{type:"button",className:"bg-[#800000] hover:bg-[#700000] text-white py-2 px-6 rounded-lg font-medium transition-all duration-200",onClick:()=>document.querySelector('input[type="file"]').click(),children:"Browse Files"})]})]})}),e.jsxs(S,{className:"gap-2",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>{t(!1),f(),c(null)},disabled:a,children:"Cancel"}),e.jsx(h,{type:"submit",disabled:!x.image||a,className:"bg-[#800000] hover:bg-[#700000] text-white",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"ðŸ“¤"}),e.jsx("span",{className:"ml-1",children:"Upload Image"})]})})]})]})]})]})})}export{y as NewImage,Z as default};
