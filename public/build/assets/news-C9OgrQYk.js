import{r as o,G as T,j as e,A as _}from"./app-B0pxwg2r.js";import{A as B}from"./AdminLayout-C1Kb32ED.js";import{N as I,a as P,b as R}from"./news-CFci6EoV.js";import{D as O}from"./DashboardTitle-Citu6mHk.js";import{M as z}from"./Modal-BvxHK_u0.js";import{B as i}from"./react-toastify.esm-CN9H2RyC.js";import{F as Z,a as y,b as G}from"./XMarkIcon-BpynJJ73.js";import"./index.es-BnXZIXEt.js";import"./index-DswxwWLv.js";import"./index-BiieDg6q.js";import"./CalendarDaysIcon-DEGQBRP8.js";import"./UserIcon-7Rv-0k9d.js";import"./AuthenticatedLayout-rbSj5hDT.js";import"./ChevronDownIcon-C8VROZvo.js";import"./transition-CIYSW4No.js";import"./XMarkIcon-DGv1eBhO.js";import"./dialog-C7d9gt61.js";import"./axios-C-DNSu9d.js";import"./use-text-value-xkT99SXs.js";import"./PhotoIcon-D9oSnM2h.js";import"./ScaleLoader-BIEOor29.js";const me=({data:p})=>{const[v,m]=o.useState(!1),[r,u]=o.useState(""),[h,C]=o.useState("newest"),[x,S]=o.useState(!1),[l,d]=o.useState([]),[b,g]=o.useState(null),w=()=>{m(!1),N()},{data:n,setData:f,post:$,processing:k,reset:N,errors:D}=T({title:"",content:"",image:null}),F=t=>{const{name:s,value:a}=t.target;f(s,a)},A=t=>{f("image",t.target.files[0])},L=t=>{const s=new FormData;s.append("title",n.title),s.append("content",n.content),n.image&&s.append("image",n.image),$(route("news.create"),{data:s,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{N(),w(),i.success("News article published successfully! ðŸŽ‰")},onError:()=>{i.error("Error publishing news article")}})},c=o.useMemo(()=>{let t=p.filter(s=>s.title.toLowerCase().includes(r.toLowerCase())||s.content.toLowerCase().includes(r.toLowerCase())||`${s.member.firstName} ${s.member.lastName}`.toLowerCase().includes(r.toLowerCase()));return t.sort((s,a)=>{switch(h){case"newest":return new Date(a.created_at)-new Date(s.created_at);case"oldest":return new Date(s.created_at)-new Date(a.created_at);case"title":return s.title.localeCompare(a.title);case"author":return`${s.member.firstName} ${s.member.lastName}`.localeCompare(`${a.member.firstName} ${a.member.lastName}`);default:return 0}}),t},[p,r,h]),j=t=>{window.confirm("Are you sure you want to delete this news article?")&&(g(t),_.delete(route("delete.news"),{data:{id:t},onSuccess:()=>{i.success("News article deleted successfully! ðŸ—‘ï¸"),g(null)},onError:()=>{i.error("Error deleting news article"),g(null)}}))},E=()=>{l.length!==0&&window.confirm(`Are you sure you want to delete ${l.length} news article(s)?`)&&(i.success(`${l.length} news articles deleted successfully! ðŸ—‘ï¸`),d([]))};return e.jsxs(B,{children:[e.jsx(z,{isOpen:v,title:"Publish News Article",body:e.jsx(P,{handleChange:F,formValues:n,handleImageChange:A,errors:D}),button:e.jsx(I,{handleSubmit:L,isLoading:k}),closeModal:w}),e.jsxs("main",{className:"p-5 sm:p-10 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{title:"News & Updates Management",subtitle:"Publish and manage news articles for the association"}),e.jsxs("button",{onClick:()=>m(!0),className:"bg-[#800000] hover:bg-[#700000] text-white px-6 py-3 rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg",children:[e.jsx("span",{children:"ðŸ“°"}),"Publish News"]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Z,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:r,onChange:t=>u(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#800000] focus:border-transparent transition-all duration-200",placeholder:"Search news by title, content, or author..."}),r&&e.jsx("button",{onClick:()=>u(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(y,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:h,onChange:t=>C(t.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#800000] focus:border-transparent transition-all duration-200",children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"title",children:"Title A-Z"}),e.jsx("option",{value:"author",children:"Author A-Z"})]}),e.jsxs("button",{onClick:()=>S(!x),className:`px-4 py-3 rounded-lg transition-all duration-200 flex items-center gap-2 ${x?"bg-[#800000] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(G,{className:"h-5 w-5"}),"Filters"]})]})]}),l.length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-center justify-between",children:[e.jsxs("span",{className:"text-amber-800 font-medium",children:[l.length," article(s) selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:E,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors duration-200",children:"Delete Selected"}),e.jsx("button",{onClick:()=>d([]),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors duration-200",children:"Clear Selection"})]})]})]}),c.length===0?e.jsxs("div",{className:"text-center py-16 bg-white/60 rounded-xl border-2 border-dashed border-gray-300",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“°"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:r?"No articles found":"No news articles yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:r?"Try adjusting your search terms":"Publish your first news article to get started"}),!r&&e.jsxs("button",{onClick:()=>m(!0),className:"bg-[#800000] hover:bg-[#700000] text-white px-6 py-3 rounded-lg",children:[e.jsx("span",{children:"ðŸ“°"}),"Publish First Article"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[c.length," article",c.length!==1?"s":""," found"]}),r&&e.jsx("button",{onClick:()=>u(""),className:"text-sm text-[#800000] hover:underline",children:"Clear search"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((t,s)=>e.jsxs("div",{className:"group relative",style:{animationDelay:`${s*100}ms`},children:[e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("input",{type:"checkbox",checked:l.includes(t.id),onChange:a=>{a.target.checked?d([...l,t.id]):d(l.filter(M=>M!==t.id))},className:"w-4 h-4 text-[#800000] bg-white border-gray-300 rounded focus:ring-[#800000]"})}),e.jsx("div",{className:"absolute top-3 right-3 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("button",{onClick:()=>j(t.id),disabled:b===t.id,className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors duration-200 disabled:opacity-50",children:b===t.id?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(y,{className:"h-4 w-4"})})}),e.jsx(R,{title:t.title,content:t.content,image:t.image,name:`${t.member.firstName} ${t.member.lastName}`,admin:!0,created_at:t.created_at,deleteNews:()=>j(t.id)})]},t.id||s))})]})]})]})};export{me as default};
