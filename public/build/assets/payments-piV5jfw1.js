import{r as a,G as E,j as e}from"./app-Cs3-W5eI.js";import{A as P}from"./AdminLayout-BsPD6BQ1.js";import{A as T,a as f}from"./ActivePaymentCard-CrWdLwM_.js";import{D as A}from"./DashboardTitle-CsWYgt3T.js";import{s as M}from"./set-D5WC58x5.js";import{F as R,s as F}from"./searchFunction-BFj2_WWB.js";import{M as _}from"./Modal-DTaRQH82.js";import{B}from"./BadgeSuccess-cD-hn0_S.js";import{B as b}from"./react-toastify.esm-xFVczvMk.js";import{F as D}from"./FunnelIcon-CwQTuf3z.js";import{S as L}from"./ScaleLoader-C3Ep_K1Q.js";import"./index.es-Biuk2NTj.js";import"./index-DswxwWLv.js";import"./index-BojGK5iO.js";import"./moment-C5S46NFB.js";import"./transition-1juTgYFe.js";import"./dialog-BebF9Ee5.js";function q({title:r,titleId:s,...i},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const O=a.forwardRef(q);function $({title:r,titleId:s,...i},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},i),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const I=a.forwardRef($),oe=({auth:{user:r},data:s,activePayments:i})=>{const[t,o]=a.useState(1),[m,g]=a.useState({status:"",search:[]}),[p,j]=a.useState(!1),{data:x,setData:y,post:v,processing:c,reset:N,errors:h}=E({amount:"",title:"",description:"",set:"all set",close_date:""}),w=n=>{y(n.target.name,n.target.value)},k=n=>{n.preventDefault(),v(route("ticket.create"),{onSuccess:()=>{N(),u(),b.success("Payment ticket created successfully! ðŸŽ‰")},onError:()=>{b.error("Error creating payment ticket"),console.log("Submission error:",h)}})},C=n=>{o(1),g(d=>({...d,[n.target.name]:n.target.value}))},S=n=>{const d=F(n.target.value,s.data.map(l=>({...l,firstName:l.member.firstName,lastName:l.member.lastName})));g(l=>({...l,search:d}))},u=()=>j(!p);return e.jsxs(P,{children:[e.jsx(_,{isOpen:p,title:"Create Payment Ticket",body:e.jsx(z,{handleChange:w,formValues:x,isSuccess:x.success,errors:h}),button:e.jsx(W,{handleSubmit:k,isLoading:c}),closeModal:u}),e.jsxs("main",{className:"p-5 sm:p-10 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(A,{title:"Payment Management",subtitle:"Manage payment records and create payment tickets"}),e.jsxs("button",{onClick:u,className:"bg-[#800000] hover:bg-[#700000] text-white px-6 py-3 rounded-lg transition-all duration-200 flex items-center gap-2 font-medium shadow-md hover:shadow-lg",children:[e.jsx("span",{children:"ðŸ’³"}),"Create Payment Ticket"]})]}),e.jsx(T,{admin:!0,data:i||[],loading:c}),e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(R,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{onChange:S,placeholder:"Search payments by member name...",name:"search",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#800000] focus:border-transparent transition-all duration-200 font-figtree"})]}),e.jsx("div",{className:"lg:w-48",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("select",{name:"status",onChange:C,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#800000] focus:border-transparent transition-all duration-200 font-figtree appearance-none bg-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"success",children:"âœ… Success"}),e.jsx("option",{value:"pending",children:"â³ Pending"}),e.jsx("option",{value:"failed",children:"âŒ Failed"})]})]})})]})}),m.search.length>0&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-lg",children:"ðŸ”"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Search Results"}),e.jsxs("span",{className:"bg-[#800000] text-white px-2 py-1 rounded-full text-sm",children:[m.search.length," found"]})]}),e.jsx(f,{data:m.search||[],loading:c})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ’³"}),"Payment Records"]})}),e.jsx(f,{data:s.data||[],loading:c}),e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsxs("span",{className:"bg-white px-3 py-2 rounded-lg shadow-sm border",children:["Page ",s.current_page," of ",s.last_page]}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsxs("span",{children:["Total: ",s.total||0," payments"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>t>1&&o(t-1),disabled:t<=1,className:"px-4 py-2 bg-white shadow-md rounded-lg hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,s.last_page)},(n,d)=>{const l=d+1;return e.jsx("button",{onClick:()=>o(l),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${t===l?"bg-[#800000] text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:l},l)})}),e.jsxs("button",{onClick:()=>t<s.last_page&&o(t+1),disabled:t>=s.last_page,className:"px-4 py-2 bg-white shadow-md rounded-lg hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(I,{className:"h-4 w-4"})]})]})]})})]})]})]})},W=({handleSubmit:r,isLoading:s})=>e.jsx("button",{onClick:r,type:"button",className:"inline-flex text-white font-figtree justify-center rounded-lg border border-transparent bg-[#800000] px-6 py-3 text-sm font-medium hover:bg-[#700000] focus:outline-none focus-visible:ring-2 focus-visible:ring-[#800000] focus-visible:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:s,children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"px-2",color:"white",height:16}),e.jsx("span",{children:"Creating..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ’³"}),e.jsx("span",{children:"Create Payment Ticket"})]})}),z=({handleChange:r,formValues:s,isSuccess:i,errors:t})=>e.jsxs("div",{className:"space-y-6 py-6",children:[i&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsx(B,{message:"Payment Ticket Created Successfully!"})}),t&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"text-red-600 font-medium flex items-center gap-2",children:[e.jsx("span",{children:"âš ï¸"}),t.message||"Please check your input and try again"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ticket Title *"}),e.jsx("input",{type:"text",name:"title",required:!0,value:s.title,onChange:r,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#800000] focus:border-transparent transition-all duration-200 font-figtree",placeholder:"Enter ticket title..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount *"}),e.jsx("input",{type:"text",name:"amount",required:!0,value:s.amount,onChange:r,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#800000] focus:border-transparent transition-all duration-200 font-figtree",placeholder:"Enter amount..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Close Date *"}),e.jsx("input",{type:"date",name:"close_date",required:!0,value:s.close_date,onChange:r,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#800000] focus:border-transparent transition-all duration-200 font-figtree"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Target Set *"}),e.jsxs("select",{name:"set",required:!0,value:s.set,onChange:r,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#800000] focus:border-transparent transition-all duration-200 font-figtree appearance-none bg-white",children:[e.jsx("option",{value:"all set",children:"All Set"}),M.map(o=>e.jsx("option",{value:o,children:o},o))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description *"}),e.jsx("textarea",{id:"content",name:"description",required:!0,value:s.description,onChange:r,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#800000] focus:border-transparent transition-all duration-200 font-figtree resize-none",placeholder:"Enter detailed description...",rows:5})]})]});export{oe as default};
